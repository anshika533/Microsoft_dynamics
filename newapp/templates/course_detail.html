{% extends 'layout.html' %}
{% load static %}
{% block content %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <style>
    .training-modes-section .card {
      width: 180px !important;
      height: 180px !important;
      border-radius: 1.5rem !important;
      border: 1px solid rgba(123, 78, 255, 0.3) !important;
      transition: transform 0.3s ease, box-shadow 0.3s ease !important;
      background-color: white !important;
      padding: 30px 20px !important;
    }
    
    .training-modes-section .card i {
      font-size: 2.5rem !important;
      color: #7b4eff !important;
      transition: transform 0.3s ease !important;
    }
    
    .training-modes-section .card h5 {
      margin-top: 15px !important;
      font-weight: 500 !important;
      color: #333 !important;
    }
    
    .training-modes-section .card:hover {
      transform: translateY(-8px) !important;
      box-shadow: 0 5px 5px blue !important;
      /* purple glow on hover */
    }
    
    .training-modes-section .card:hover i {
      transform: scale(1.2) !important;
    }
    
    @media (max-width: 576px) {
      .training-modes-section .card {
        margin: 0 auto; /* Center the card */
      }
    
      .training-buttons {
        flex-direction: column !important;
        align-items: center !important;
      }
    
      .training-buttons a {
        width: 80%;
        margin-bottom: 10px;
        text-align: center;
      }
    }
  </style>
  <section style="background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%); color: white;">
    <div class="container py-5" style="text-align: justify;">
      <div class="row g-4">
        <div class="col-md-7 pe-lg-5">
          <h1 class="mb-4" style="word-break: break-word; white-space: normal; text-align: left; text-justify: none;">{{ course.title }}</h1>
          <p class="mt-3">‚≠ê {{ course.rating }} - {{ course.review_count }} reviews</p>
          <p>{{ course.full_description }}</p>

          <div class="row mt-4">
            <div class="col-6 col-md-3">
              üë©‚Äçüéì <strong>{{ course.total_learners }}+</strong><br />Total Learners
            </div>
            <div class="col-6 col-md-3">
              ‚è≥ <strong>{{ course.course_duration }}</strong><br />Course Duration
            </div>
            <div class="col-6 col-md-3">
              üìö <strong>{{ course.assignments_duration }}</strong><br />Assignments
            </div>
            <div class="col-6 col-md-3">
              üíº{% if course.job_oriented_training %}100%{% endif %}<br />Job Oriented
            </div>
          </div>

          <div class="mt-4">
            <a href="https://wa.me/" class="btn btn-success me-2">Contact us</a>
            <a href="#syllabus-section" class="btn btn-light text-danger">üìÑ View Syllabus</a>
          </div>
        </div>
        <div class="col-md-5 d-flex align-items-center justify-content-center">
          <div class="w-100" style="max-width: 400px;">
            <div class="ratio ratio-16x9">
              {% if course.video %}
                <video width="100%" controls style="border:5px solid white;">
                  <source src="{{ course.video.url }}" type="video/mp4" />
                </video>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="training-modes-section py-5 bg-white text-center">
    <div class="container">
      <h1 class="text-purple mb-3">NIITF's Training Modes</h1>
      <div class="line-decorator mx-auto mb-4" style="width: 80px; height: 3px; background-color: #7b4eff; border-radius: 5px;"></div>
      <p class="mb-5 fs-5">Learn From World‚Äôs Top Microsoft Dynamics Business Central Certified Faculty And Industry Leaders</p>

      <div class="row g-4 justify-content-center">
        {% comment %}Card 1{% endcomment %}
        <div class="col-md-4 col-lg-2">
          <div class="card">
            <i class="bi bi-people-fill"></i>
            <h5>Online Batch Training</h5>
          </div>
        </div>
        {% comment %}Card 2{% endcomment %}
        <div class="col-md-4 col-lg-2">
          <div class="card">
            <i class="bi bi-person-lines-fill"></i>
            <h5>One To One Training</h5>
          </div>
        </div>
        {% comment %}Card 3{% endcomment %}
        <div class="col-md-4 col-lg-2">
          <div class="card">
            <i class="bi bi-gear-fill"></i>
            <h5>Customized Training</h5>
          </div>
        </div>
        {% comment %}Card 4{% endcomment %}
        <div class="col-md-4 col-lg-2">
          <div class="card">
            <i class="bi bi-clock-fill"></i>
            <h5>Fast Track Training</h5>
          </div>
        </div>
        {% comment %}Card 5{% endcomment %}
        <div class="col-md-4 col-lg-2">
          <div class="card">
            <i class="bi bi-person-badge-fill"></i>
            <h5>Corporate Training</h5>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="mt-5 d-flex justify-content-center training-buttons flex-wrap gap-3">
          <a href="#" style="background-color: blue; padding: 10px 20px; border-radius: 20px; border: none; color: white; font-size:1.4rem; text-decoration:none;">Enroll Now</a>
          <a href="#" style="background-color: blue; padding: 10px 20px; border-radius: 20px; border: none; color: white; font-size:1.4rem; text-decoration:none;">Free Demo</a>
        </div>
      </div>
    </div>
  </section>
  {% comment %}navbar{% endcomment %}
  {% include 'includes/custom_navbar.html' %}

  {% comment %}Syllabus Section{% endcomment %}
  <section id="syllabus-section" class="py-5 bg-light text-dark">
    <div class="container">
      <h2 class="fw-bold mb-4">üìò Course Syllabus</h2>

      {% if course.syllabus_link %}
        {% if course.syllabus_link|slice:':4' == 'http' %}
          {% comment %}If syllabus_link is a URL{% endcomment %}
          <p>
            <a href="{{ course.syllabus_link }}" target="_blank" class="btn btn-outline-primary">üì• Download Syllabus</a>
          </p>
        {% else %}
          {% comment %}syllabus_link is text{% endcomment %}
          <p>{{ course.syllabus_link|safe }}</p>
        {% endif %}
      {% else %}
        {% comment %}If syllabus not available{% endcomment %}
        <p class="text-muted">Syllabus is not available for this course yet.</p>
      {% endif %}
    </div>
  </section>

  <section class="upcoming-batch-section">
  <div class="container">
    <h2>Upcoming Batch Schedule</h2>
    <div class="line-decorator mx-auto mb-4" style="width: 80px; height: 3px; background-color: #7b4eff; border-radius: 5px;"></div>
    <p class="description">
      Check Out Our Microsoft Dynamics Online Certification Batch Timings. Does This Batch Not Suit Your Timings? No Worries, We Will Customize And Arrange The Batch Timings That Match You Perfectly To Your Interest.
    </p>

    <div class="row d-flex">
      <div class="batch-grid">
        {% for batch in upcoming_batches %}
        <div class="batch-card">
          <div class="batch-header-wrapper">
            <div class="batch-header">{{ batch.batch_type|upper }}</div>
          </div>
          <div class="batch-date">{{ batch.start_date|date:"d-m-Y" }}</div>
          <div class="batch-info">
            <p>{{ batch.title }}</p>
            <p>{{ batch.schedule_details }}</p>
          </div>
          {% if batch.course_fees_link %}
          <a href="{{ batch.course_fees_link }}" class="course-fees-btn">Course Fees</a>
          {% endif %}
        </div>
        {% empty %}
        <p>No upcoming batches available.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

  <style>
    .upcoming-batch-section {
      padding: 40px 20px;
      background-color: #fff;
      text-align: center;
    }
    
    .underline {
      width: 80px;
      height: 3px;
      background-color: #6c2eb9;
      margin: 10px auto 20px;
    }
    
    .description {
      max-width: 800px;
      margin: auto;
      font-size: 1rem;
      color: #555;
    }
    
    .batch-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }
    
    .batch-card {
      background: #fff;
      border: 1px solid #eee;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 200px;
      position: relative;
      border-top: 5px solid #6c2eb9;
    }
 .batch-card {
  position: relative;
  overflow: hidden; /* yeh important hai overflow clip karne ke liye */
  background: #fff;
  border: 1px solid #eee;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  padding: 20px;
  width: 400px;
  border-top: 5px solid #6c2eb9;
}

.batch-header-wrapper {
  position: absolute;
  top: -25px;       /* card ke upar overlap karne ke liye */
  right: 0;
  width: 130px;
  height: 130px;
  overflow: hidden;
  pointer-events: none;
  z-index: 10;
}

.batch-header {
  background-color: #6c2eb9;
  color: #fff;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: bold;
  width: 160px;
  text-align: center;
  transform: rotate(45deg);
  transform-origin: top right;
  position: relative;
  left: 2px;   /* adjust to position */
  top: 105px;    /* adjust to position */
}


    .batch-date {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .batch-info p {
      font-size: 0.9rem;
      margin: 5px 0;
    }
    
    .course-fees-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 8px 15px;
      border: 1px solid #6c2eb9;
      color: #6c2eb9;
      text-decoration: none;
      border-radius: 5px;
      transition: 0.3s;
    }
    
    .course-fees-btn:hover {
      background-color: #6c2eb9;
      color: #fff;
    }
  </style>
{% endblock %}
